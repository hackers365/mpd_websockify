<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Responses</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="The Music Player Daemon protocol"><link rel="up" href="ch01.html" title="Chapter 1. General protocol syntax"><link rel="prev" href="ch01s02.html" title="Requests"><link rel="next" href="ch01s04.html" title="Command lists"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Responses</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s02.html">Prev</a> </td><th width="60%" align="center">Chapter 1. General protocol syntax</th><td width="20%" align="right"> <a accesskey="n" href="ch01s04.html">Next</a></td></tr></table><hr></div><div class="section" title="Responses"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp200400"></a>Responses</h2></div></div></div><p>
        A command returns <span class="returnvalue">OK</span> on completion or
        <span class="returnvalue">ACK some error</span> on failure.  These
        denote the end of command execution.
      </p><div class="section" title="Failure responses"><div class="titlepage"><div><div><h3 class="title"><a name="idp202352"></a>Failure responses</h3></div></div></div><p>
          The nature of the error can be gleaned from the information
          that follows the <span class="returnvalue">ACK</span>.
          <span class="returnvalue">ACK</span> lines are of the form:

          </p><pre class="synopsis">ACK [error@command_listNum] {current_command} message_text\n</pre><p>

          These responses are generated by a call to
          <code class="function">commandError</code>. They contain four separate
          terms. Let's look at each of them:

          </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="returnvalue">error</span>: numeric value of one
                of the <code class="constant">ACK_ERROR</code> constants defined
                in <code class="filename">ack.h</code>.
              </p></li><li class="listitem"><p>
                <span class="returnvalue">command_listNum</span>:
                offset of the command that caused the error in a <a class="link" href="ch01s04.html" title="Command lists">Command List</a>.
                An error will always cause a command list to terminate
                at the command that causes the error.
              </p></li><li class="listitem"><p>
                <span class="returnvalue">current_command</span>:
                name of the command, in a <a class="link" href="ch01s04.html" title="Command lists">Command List</a>,
                that was executing when the error occurred.
              </p></li><li class="listitem"><p>
                <span class="returnvalue">message_text</span>:
                some (hopefully) informative text that describes the
                nature of the error.
              </p></li></ul></div><p>
        </p><div class="example"><a name="idp81712"></a><p class="title"><b>Example 1.1. foo</b></p><div class="example-contents"><p>
            An example might help. Consider the following sequence
            sent from the client to the server.

            </p><pre class="synopsis">
              command_list_begin
              volume 86
              play 10240
              status
              command_list_end
            </pre><p>
          </p><p>
            The server responds with:

            <span class="returnvalue">
              ACK [50@1] {play} song doesn't exist: "10240"
            </span>
          </p><p>
            This tells us that the play command, which was the
            second in the list (the first or only command is
            numbered 0), failed with error 50.  The number 50
            translates to <code class="constant">ACK_ERROR_NO_EXIST</code>--the
            song doesn't exist.  This is reiterated by the message text
            which also tells us which song doesn't exist.
          </p></div></div><br class="example-break"></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch01.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch01s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Requests </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Command lists</td></tr></table></div></body></html>
